"use strict";(self["webpackChunkopenchat"]=self["webpackChunkopenchat"]||[]).push([[644],{9644:function(t,s,e){e.r(s),e.d(s,{default:function(){return c}});var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"flex flex-wrap w-full justify-center bg-sky-500 py-20"},[t.ready?t.access?e("div",[e("div",{staticClass:"max-w-md mx-3 my-5 py-4 px-8 bg-white shadow-lg rounded-lg"},[e("h2",{staticClass:"text-gray-800 text-3xl font-semibold"},[t._v("加入管理層社群")]),e("p",{staticClass:"mt-2 text-gray-600"},[t._v("你好，"+t._s(t.profile.nickname)+"，這裡是加入密碼：")]),e("p",{directives:[{name:"show",rawName:"v-show",value:t.status,expression:"status"}],staticClass:"mt-2 text-red-600"},[t._v(t._s(t.status))]),e("div",{staticClass:"w-full mt-2 text-gray-600 flex rounded bg-white shadow-md"},[e("input",{staticClass:"w-full border-none bg-transparent px-4 py-1 text-gray-900 outline-none focus:outline-none",attrs:{type:"text"},domProps:{value:t.password}}),e("button",{staticClass:"m-2 rounded px-4 py-2 font-semibold",on:{click:t.copySecret}},[e("svg",{directives:[{name:"show",rawName:"v-show",value:t.ready,expression:"ready"}],staticClass:"h-6 w-6",attrs:{fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2","stroke-linecap":"round","stroke-linejoin":"round"}})])])]),e("div",{staticClass:"flex justify-end mt-4"},[e("a",{staticClass:"flex items-center justify-center bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full",attrs:{href:t.url}},[t._v(" 加入連結在這裡 ")])])])]):e("div",{staticClass:"text-white"},[t._v(" "+t._s(t.status||"存取遭拒")+" ")]):e("div",{staticClass:"text-white"},[t._v(" 載入中... ")])])},i=[],r={name:"AdminRoomView",data:()=>({profile:null,status:null,ready:!1,access:!1,url:null,password:null}),methods:{copySecret(){navigator.clipboard?navigator.clipboard.writeText(this.password).then((()=>this.status="已複製代碼")).catch((()=>this.status="無法複製代碼")):this.status="您的瀏覽器不支援複製功能"}},async created(){if(this.profile=await this.$profile(),this.profile)if(Array.isArray(this.profile?.roles)&&this.profile.roles.includes("openchat")){this.access=!0;try{const t=await this.$axios.get("/admin-room");this.url=t.data.url,this.password=t.data.password}catch(t){t?.response?.data?.code||(this.status="授權伺服器發生嚴重錯誤")}finally{this.ready=!0}}else console.log("forbidden");else{const t="https://web-tech.tw/openchat/#/admin/room",s=`https://web-tech.tw/sara/?refer=${encodeURIComponent(t)}`;location.assign(s)}}},o=r,l=e(1001),n=(0,l.Z)(o,a,i,!1,null,null,null),c=n.exports}}]);
//# sourceMappingURL=644.cb0ecdb8.js.map